#edit-script-content
  %h1 Edit Your Script
  = link_to "Back to scripts", scripts_path
  = link_to "Create new level", builder_path

  %p#script-updated="Script Updated"

  %p="Current Levels"
  - filtered_levels = @levels.to_a
  %ul#current-script-levels.connectedSortable
    - @current_script_levels.each do |sl|
      - level = sl.level
      - filtered_levels.delete(level)
      = render partial: "drag_level", locals: { level: level }

  %p="Unused Levels"
  %ul#all-levels.connectedSortable
    - filtered_levels.each do |level|
      = render partial: "drag_level", locals: { level: level }

%iframe#blockly-frame

:javascript
  $('#current-script-levels, #all-levels').sortable({
    connectWith: '.connectedSortable',
  }).disableSelection();
  $('#current-script-levels').sortable({
    update: function() {
      $.post('#{script_sort_url @script}', $('#current-script-levels').sortable('serialize') + "&id=" + #{@script.id})
        .done(function () {
          $('#script-updated').fadeIn('slow').fadeOut('slow');
        });
    }
  });
  $('.sl-edit-level-link').click(function(e) { // hoverIntent plugin
    $('#blockly-frame').attr('src', $(this).data('url'));
  });
:css
  .container {
    width: 100%;
  }
